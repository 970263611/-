<!DOCTYPE HTML>
<!--
	Justice by gettemplates.co
	Twitter: http://twitter.com/gettemplateco
	URL: #
-->
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>大花的博客-个人中心</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="DaHua's Blog，Welcome to see!" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="GetTemplates.co" />

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<link href="css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	
	<!-- 引入layer -->
	<link rel="stylesheet" href="layer/layer.css">
	
	<link rel="stylesheet" href="css/webuploader.css">
	
	
    

	<style type="text/css">
	.gtco-cover 
	{
    	height: 452px;
    }
    #gtco-post-list li 
	{
        min-height: auto;
	}
	.mt-negative 
	{
    	top: 0px;
    }
    .btn 
    {
        padding: auto;
        font-size: 12px;
    }
    .input-group .form-control 
    {
    	height: 44px;
    }
     #test_photo  
 	{ 
     	display: inline; 
     	height:35px;
   	    width: 80%;
    } 
    .img-responsive {
	    height: 300px;
	}
	.webuploader-pick{
		color:#333;
		padding:0;
		display:block;
		background: #00b7ee;
	}
    @media screen and (max-width: 768px)
	{
 		.img-responsive 
 		{
		    height: auto;
		}
		#filePicker
		{
			width: 21%;
		}
		#ctlBtn
		{
			width: 28%;
		}
		 #test_photo  
 		{ 
		    width: 44%;
	    }
	}
	</style>
	</head>
	<body>
		
	<div class="gtco-loader"></div>
	
	<div id="page">
	<nav class="gtco-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-lg-2 text-left">
					<div id="gtco-logo"><a href="index.html">大花的博客<span>.</span></a></div>
				</div>
				<div class="col-xs-10 text-right menu-1">
					<ul>
						<li class="has-dropdown" style="display:inline-block;">
							<a>提笔</a>
							<ul class="dropdown" style="width:100px;">
								<li><a href="/write?type=1">技术交流</a></li>
								<li><a href="/write?type=2">我的困惑</a></li>
								<li><a href="/write?type=3">谈谈生活</a></li>
							</ul>
						</li>

						<li><a href="myworld">个人</a></li>
<!-- 						<li><a href="javascript:void(0);" onclick="words_block()">留言</a></li> -->
						<li th:switch="${session.user}">
							<a th:case=null></a>
							<a th:case=* th:text=${session.user.nickname} class="dropdown" href="javascript:void(0);" onclick="loginOut()">登录</a>
						</li>
					</ul>
				</div>
			</div>
			
		</div>
	</nav>

	<header id="gtco-header" class="gtco-cover" role="banner" style="background-image:url(images/image_7.jpg);" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-7 text-left">
					<div class="display-t" style="height:auto;padding-top:170px;">
						<div class="display-tc animate-box" data-animate-effect="fadeInUp" style="height:auto;">
							<h1 class="mb30"><a th:text=${nickname}></a></h1>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	
	<div id="gtco-maine">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-12">
					<article class="mt-negative" style="width:100%">
						<div class="text-left content-article">
							<div class="row row-pb-sm">
								<div th:switch="${test1}" class="col-md-12 animate-box">
									<blockquote>
									<p>
									<p th:case=null>say something 说点什么吧</p>
									<p id="test_1" th:case=* th:text=${test1}></p>  
										<cite th:text="'by - ' + ${nickname}">&mdash; Jean Smith</cite>
										<button type="button" id="btn_1" class="btn btn-default btn-sm" data-toggle="modal" data-target="#exampleModal" style="float:right">编辑</button>
									</p>
									</blockquote>
								</div>
							</div>

							<div class="row row-pb-sm">
								<div th:switch="${test2}" class="col-md-12 animate-box">
									<blockquote>
									<h2 id='myWorld'>自我介绍</h2>
									<p th:case=null>say something 说点什么吧</p>
									<p id="test_2" th:case=* th:text=${test2}></p> 
									<button type="button" id="btn_2" class="btn btn-default btn-sm" data-toggle="modal" data-target="#exampleModal1" style="float:right">编辑</button>
									</blockquote>
								</div>

							 	<div  th:each="iter,iterStat:${image_list}" class="col-md-4 animate-box">
									<figure>
										<img th:src='${iter.image}' alt="DaHua's Blog，Welcome to see!" class="img-responsive">
										<figcaption><p th:text=${iter.text}></p></figcaption>
									</figure>
								</div>
								<div class="clear:both"></div>
							</div>
								<div id='phone_file_input'>
									<span style="font-size:14px;"><div id="uploader-demo">  
									    <!--用来存放item-->  
									    <div id="thelist" class="uploader-list"></div>  
									    <div>  
										    <button id="filePicker" class="btn btn-default">选择文件</button>
										    <input type="text" id = "test_photo" > 
										    <button id="ctlBtn" class="btn btn-default">开始上传</button>
									    </div>  
									</span> 
								</div>
						</div>
					</article>
				</div>
			</div>
			
			
			<!--显示文章的地方 -->
			<div class="row">
				<div class="col-md-12">
					<h2 id="myJournal" class="related-title animate-box">我的日志</h2>
				</div>
			</div>
			
			<div class="row row-pb-md">
				<div class="col-md-12" >
					<ul id="gtco-post-list" >
						<li th:each="alist: ${list}" class="one-third entry animate-box" data-animate-effect="fadeIn">
							<a href="single.html" th:href="@{/single(id=${alist.id})}">
								<div class="entry-desc">
									<h3 th:text="${alist.title}">title</h3>
									<p  th:text="${alist.lead}">lead</p>
								</div>
							</a>
							<a href="single.html" th:href="@{/single(id=${alist.id})}" class="post-meta"></a>
							<div class="post-meta">
								 <span class="date-posted" th:text=${alist.create_user}>作者</span>
							  	 <span class="date-posted" th:text=${alist.create_time}>时间</span>
							</div>
						</li>
					</ul>	
				</div>
			</div>
		</div>
	</div>

	<!-- 模态框 -->
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="exampleModalLabel">编辑我的铭言</h4>
	      </div>
	      <div class="modal-body">
	        <form>
	          <div class="form-group">
	            <label for="message-text" class="control-label">message:</label>
	            <textarea class="form-control" id="message-text1"></textarea>
	          </div>
	        </form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-primary" onclick="save()">保存</button>
	      </div>
	    </div>
	  </div>
	</div>
	
	<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="exampleModalLabel">编辑我的格言</h4>
	      </div>
	      <div class="modal-body">
	        <form>
	          <div class="form-group">
	            <label for="message-text" class="control-label">message:</label>
	            <textarea class="form-control" id="message-text2"></textarea>
	          </div>
	        </form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-primary" onclick="save()">保存</button>
	      </div>
	    </div>
	  </div>
	</div>


	
	<footer id="gtco-footer" role="contentinfo">
		<div class="container">
			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<small class="block">&copy; September 1 2017. Website all information from <a target="_blank" title="大花">大花的博客</a> - All Rights Reserved <a target="_blank">版权所有</a></small> 
					</p>
					<div class="bshare-custom"><a title="分享到QQ好友" class="bshare-qqim"></a><a title="分享到微信" class="bshare-weixin"></a><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/button.js#style=-1&amp;uuid=&amp;pophcol=3&amp;lang=zh"></script><a class="bshareDiv" onclick="javascript:return false;"></a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script></div>
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery-3.2.1.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	
	<script src="js/fileinput.js" type="text/javascript"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js" type="text/javascript"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Stellar -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>
	
	<script src="layer/layer.js"></script>
	
	<script src="js/webuploader.js"></script>
	
	
	<script type="text/javascript">
		//保存铭言和格言
		function save(){
			var test1 = $("#message-text1").val();
			var test2 = $("#message-text2").val();
			if(test1 == "" || test1 == null){
				test1 = '[[${test1}]]';
			}
			if(test2 == "" || test2 == null){
				test2 = '[[${test2}]]';
			}
			$.ajax({
				type : "post",
				url : "/save_mytest",
				data : {"test1":test1,"test2":test2},
				cache: false,
				async: false,
				error: function(request) {
					layer.msg('保存失败', function(){});
	            },
	            success: function(data) {
	                if(data == "error"){
	                	layer.msg('保存失败', function(){});
	                }else if(data == "success"){
	                	window.location.href = "myworld";
	                }
	            }
			});
		}
		
		function loginOut(){
			layer.msg('确定要退出么？', {
				  time: 0 //不自动关闭
				  ,btn: ['咋的，有意见？', '你说退就退啊！']
				  ,yes: function(index){
				    layer.close(index);
				    window.location.href = "loginOut";
				  }
				});
		}
		
		//判断是用户自己访问主页还是其他人访问
		$(function(){
			var not_see = '[[${not_see}]]';
			var modify = '[[${modify}]]';
			if('yes' == not_see){
				$("#phone_file_input").attr("style","display: none;");
			}
			if('no' == modify){
				$("#myWorld").text("他的介绍");
				$("#myJournal").text("他的日志");
				$("#btn_1").attr("style","display: none;");
				$("#btn_2").attr("style","display: none;");
				$("#phone_file_input").attr("style","display: none;");
			}
		})
		
        $(function(){  
        	   /*init webuploader*/  
        	   var $list=$("#thelist");   //这几个初始化全局的百度文档上没说明，好蛋疼。  
        	   var $btn =$("#ctlBtn");   //开始上传  
        	   var thumbnailWidth = 100;   //缩略图高度和宽度 （单位是像素），当宽高度是0~1的时候，是按照百分比计算，具体可以看api文档  
        	   var thumbnailHeight = 100;  
        	  
        	   var uploader = WebUploader.create({  
        	       // 选完文件后，是否自动上传。  
        	       auto: false,  
        	  
        	       // swf文件路径  
        	       swf: 'js/Uploader.swf',  
        	  
        	       // 文件接收服务端。  
        			server : '/photo_uplode',
        
       				sendAsBinary : true, 
        	  
        	       // 选择文件的按钮。可选。  
        	       // 内部根据当前运行是创建，可能是input元素，也可能是flash.  
        	       pick: '#filePicker',  
        	  
        	       // 只允许选择图片文件。  
        	       accept: {  
        	           title: 'Images',  
        	           extensions: 'gif,jpg,jpeg,bmp,png',  
        	           mimeTypes: 'image/*'  
        	       }, 
        	       method:'POST',  
        	   });  
        	   // 当有文件添加进来的时候  
        	   uploader.on( 'fileQueued', function( file ) {  // webuploader事件.当选择文件后，文件被加载到文件队列中，触发该事件。等效于 uploader.onFileueued = function(file){...} ，类似js的事件定义。  
        	       var $li = $(  
        	               '<div id="' + file.id + '" class="file-item thumbnail">' +  
        	                   '<img>' +  
        	                   '<div class="info">' + file.name + '</div>' +  
        	               '</div>'  
        	               ),  
        	           $img = $li.find('img');  
        	  
        	  
        	       // $list为容器jQuery实例  
        	       $list.append( $li );  
        	  
        	       // 创建缩略图  
        	       // 如果为非图片文件，可以不用调用此方法。  
        	       // thumbnailWidth x thumbnailHeight 为 100 x 100  
        	       uploader.makeThumb( file, function( error, src ) {   //webuploader方法  
        	           if ( error ) {  
        	               $img.replaceWith('<span>不能预览</span>');  
        	               return;  
        	           }  
        	  
        	           $img.attr( 'src', src );  
        	       }, thumbnailWidth, thumbnailHeight );  
        	   });  
        	   
        	   uploader.on( 'uploadBeforeSend', function( block, data ) {  
        		    // block为分块数据。  
        		    // file为分块对应的file对象。  
        		    var file = block.file;  
        		    // 修改data可以控制发送哪些携带数据。  
        		    data.test_photo = $("#test_photo").val();  
        		});  
        	   
        	   // 文件上传过程中创建进度条实时显示。  
        	   uploader.on( 'uploadProgress', function( file, percentage ) {  
        	       var $li = $( '#'+file.id ),  
        	           $percent = $li.find('.progress span');  
        	  
        	       // 避免重复创建  
        	       if ( !$percent.length ) {  
        	           $percent = $('<p class="progress"><span></span></p>')  
        	                   .appendTo( $li )  
        	                   .find('span');  
        	       }  
        	  
        	       $percent.css( 'width', percentage * 100 + '%' );  
        	   });  
        	  
        	   // 文件上传成功，给item添加成功class, 用样式标记上传成功。  
        	   uploader.on( 'uploadSuccess', function( file ) {  
        	       $( '#'+file.id ).addClass('upload-state-done');  
        	       window.location.reload();
        	   });  
        	   
        	   // 文件上传失败，显示上传出错。  
        	   uploader.on( 'uploadError', function( file ) {  
        	       var $li = $( '#'+file.id ),  
        	           $error = $li.find('div.error');  
        	  
        	       // 避免重复创建  
        	       if ( !$error.length ) {  
        	           $error = $('<div class="error"></div>').appendTo( $li );  
        	       }  
        	  
        	       $error.text('上传失败');  
        	   });  
        	  
        	   // 完成上传完了，成功或者失败，先删除进度条。  
        	   uploader.on( 'uploadComplete', function( file ) {  
        	       $( '#'+file.id ).find('.progress').remove();  
        	   });  
        	      $btn.on( 'click', function() {  
        	        console.log("上传...");  
        	        uploader.upload();  
        	        console.log("上传成功"); 
        	      });  
        	  });  
        	
	</script>

	</body>
</html>